
Contents
========

 General

1.1 When I add a widget to a window, it fills the whole window and I can't
    add any other widgets.
1.2 When I save the XML, the styles are written out OK, but if I load it
    or build the source code they disappear.
1.3 How do I add a pixmap to a button?
1.4 How do I add several widgets of the same type in one go?
1.5 I get this warning whenever I use a scrolled window:
     Gtk-WARNING **: gtk_scrolled_window_add(): cannot add non scrollable
     widget use gtk_scrolled_window_add_with_viewport() instead


 Building Generated Code

2.1 How do I build the code generated by Glade?

2.2 I get this error:
      aclocal: configure.in: 10: macro `AM_PATH_GTK' not found in library

2.3 I get this error:
	** CRITICAL **: file glade_gnome.c: line 939
	 (glade_gnome_write_menu_item_source):
	 assertion `source_buffer != NULL' failed.

 Using The Generated Code

3.1 What are all the files output by Glade?
3.2 What files can the developer edit safely and which files are overwritten?
3.3 How do I add my own source files to the project?
3.4 How do I get a pointer to a widget from within a signal handler?
3.5 How do I get the value of a GtkOptionMenu?
3.6 How do I get a GtkOptionMenu to call a function when it changes?
3.7 How do I connect to GtkAdjustment signals?


==============================================================================

General
=======

1.1 When I add a widget to a window, it fills the whole window and I can't
    add any other widgets.

 A: This is not a bug in Glade! In GTK+ you use containers to lay out your
    widgets. The commonly-used containers are at the bottom of the main
    page on the palette. Try adding a vertical box to a window in Glade.
    Now add a table to one of the positions in the vertical box.
    Do you get the idea now?

    If you really want to position widgets at specific coordinates, try the
    Fixed container. However, this isn't recommended since your
    windows/dialogs will not look good when resized, and if you translate
    the text in the labels and buttons into other languages they may not fit.


1.2 When I save the XML, the styles are written out OK, but if I load it
    or build the source code they disappear.

 A: Styles are not supported yet. You can, however, use standard GTK+ rc
    files to set the colours/fonts of your widgets. If you turn on the
    'Set Widget Names' project option in Glade, that may make it easier.
    See the Resource Files section of the documentation at www.gtk.org/rdp/gtk

    (I have actually taken out the unfinished styles code in 0.5.2 so
    hopefully noone will ask me this ever again!)


1.3 How do I add a pixmap to a button?

 A: Create a button and select 'Remove Label' from the popup menu.
    You can then add any widgets you like to the button, e.g. a horizontal box
    with a pixmap and a label inside it. (Glade may make this even easier
    in future.)


1.4 How do I add several widgets of the same type in one go?

 A: Hold the 'Control' key when you select the widget in the palette. It will
    then stay selected until you select another widget or the selector.


1.5 I get this warning whenever I use a scrolled window in Glade:

     Gtk-WARNING **: gtk_scrolled_window_add(): cannot add non scrollable
     widget use gtk_scrolled_window_add_with_viewport() instead

 A: You can safely ignore this warning. It is output by GTK+ to remind people
    to update their code, since the behaviour of scrolled windows changed quite
    a bit between GTK+ 1.0 and GTK+ 1.2. But the Glade code is OK.
    The warning should not appear in your final application.


Building Generated Code
=======================

Building Glade-Generated C Source Code
======================================

2.1 How do I build the code generated by Glade?

 A: You need automake >= 1.4 & autoconf >= 2.13 to build the generated C code.
    You also need gettext >= 0.10.35 if you enabled gettext support. See the
    'Requirements' section in the README file for links to these.

    Run './autogen.sh' in the toplevel directory of the project to run
    automake, autoconf and the related utilities to build the Makefiles. Pass
    it any options you want passed to configure, e.g.

	./autogen.sh --prefix /usr/local/gnome

    Then run 'make' to build your application.

    Note that for Gnome applications, you must also do a 'make install' so that
    the pixmaps are installed properly. If you don't do that, it will still
    run, but you won't see the pixmaps.


2.2 I get this error:

      aclocal: configure.in: 10: macro `AM_PATH_GTK' not found in library

 A: This means that the gtk.m4 file cannot be found. (gtk.m4 is a set of m4
    macros which is installed as part of GTK+ and is used to build programs
    which use GTK+.) aclocal (part of automake) searches for these macros to
    add to aclocal.m4 in your program's root directory.

    To find out where GTK+ is installed, run 'gtk-config --prefix'.
    The gtk.m4 file should be in the 'share/aclocal' subdirectory.
    To find out the directory that aclocal is using, run
      'aclocal --print-ac-dir'

    You should add the directory that the GTK+ m4 file is installed to the
    ACLOCAL_FLAGS environment variable, e.g. if the GTK+ m4 files are in
    /usr/local/share/aclocal, then add this to your $HOME/.profile:

      export ACLOCAL_FLAGS="-I /usr/local/share/aclocal/"


2.3 I get this error:

	** CRITICAL **: file glade_gnome.c: line 939
	    (glade_gnome_write_menu_item_source):
		assertion `source_buffer != NULL' failed.

 A: You are trying to use Gnome stock menu items in a GTK+-only app.
    Edit any menus you have and make sure the "Stock" property is set to
    "None" for every item.


Using The Generated Code
========================


3.1 What are all the files output by Glade?

These are the default output files, but some of your file names may differ
if you have changed the project options.

autogen.sh	- a script which runs automake, autoconf and the related
		  programs in the correct order, making it very easy to build
		  the application. You pass it any arguments you want to be
		  passed to configure. After running it, you can type 'make'
		  to build the application.
configure.in	- standard script passed to autoconf to generate the configure
		  script.
Makefile.am	- standard make rules passed to automake to generate the
		  Makefile.in, which the configure script turns into Makefile.

acconfig.h	- contains a few macros which are set during the configure
		  script and added to the config.h header (which should be the
		  first file #include'd by all of your source files).
		  Most of these macros are needed for gettext support
		  (ENABLE_NLS, HAVE_CATGETS, HAVE_GETTEXT, HAVE_LC_MESSAGES,
		  HAVE_STPCPY), HAVE_LIBSM is needed for Gnome (but it doesn't
		  hurt a GTK+ app), and a few are added by Glade
		  (PACKAGE_LOCALE_DIR, PACKAGE_DATA_DIR, PACKAGE_SOURCE_DIR).
stamp-h.in	- used as a timestamp by automake, for rebuilding some
		  generated files.

AUTHORS		- these files are all initially empty, but are created to
ChangeLog	  comply with the GNU conventions.
NEWS
README

src/Makefile.am	- standard automake file.
src/main.c	- contains the main() function which will create one of each
		  window/dialog for you.
src/interface.h - declarations of functions you can call to create the windows
		  and dialogs which were built in Glade.
src/interface.c - the code to create the windows and dialogs and all the
		  widgets.
src/callbacks.h - declarations of the signal handler and callback functions
		  which you will write.
src/callbacks.c - the signal handler and callback functions, 
src/support.h   - declarations of some support functions, including
		  lookup_widget() which you can use to get pointers to widgets.
src/support.c   - the support functions.


If gettext support is enable, the po directory is created, with POTFILES.in
and a separate ChangeLog. POTFILES.in lists the source files which contain
translatable strings, and you should add any source files you create here.

For Gnome projects the macros directory is also added, containing all the m4
macros used to build the project. (These should really have been installed as
part of Gnome, but unfortunately this wasn't done in Gnome 1.0.X. Hopefully
this will be fixed in a future version of Gnome, and so this directory will not
be needed.)

*NOTE*: if you change the 'Gnome Support' or 'Gettext Support' project
options after building the project, you will need to update some of the
build files such as configure.in, Makefile.am
The best solution may be to change the project directory in the 'Project
Options' dialog, and to rebuild the project from scratch. However, you would
have to copy over any code you have added to signal handlers. An alternative
would be to delete autogen.sh, configure.in, Makefile.am, src/Makefile.am,
and src/main.c and use Glade to recreate them. But if you have changed these
files you will need to add the changes back in.
(Hopefully Glade will deal with this better in future.)



3.2 What files can the developer edit safely and which files are overwritten?

Glade will not overwrite most of the files. It will recreate the build files
if they don't exist (and the corresponding project option is set.)

The files which Glade overwrites are:

  interface.h
  interface.c
  support.h
  support.c

(Though you may have named them differently in your project, if you changed
them in the Project Options dialog.)

These files all have a warning at the top saying 'DO NOT EDIT'.


If you have added or updated any signal handlers, then these are appended to
the callbacks.h and callbacks.c files. So any code you have already added
for callbacks is completely safe! If you have renamed a handler function then
it is up to you to remove the old version and copy any code to the new
function.



3.3 How do I add my own source files to the project?

Add the source file (and any header file) to src/Makefile.am, in the
project1_SOURCES variable (where 'project1' is the name of your project).

If you are using gettext, you may also want to add the source file to
po/POTFILES.in so that the strings can be translated.



3.4 How do I get a pointer to a widget from within a signal handler?

Use the lookup_widget() function provided. (It can be found in support.c)

You pass it a pointer to any widget in a window, and the name of the widget
that you want to get. Usually in signal handlers you can use the first argument
to the signal handler as the first parameter to lookup_widget(), e.g.

void
on_button1_clicked                     (GtkButton       *button,
                                        gpointer         user_data)
{
  GtkWidget *entry1;

  entry1 = lookup_widget (GTK_WIDGET (button), "entry1");

  ...
}


Note that this does not work if you are using libglade. The corresponding
code for libglade would be:

void
on_button1_clicked                     (GtkButton       *button,
                                        gpointer         user_data)
{
  GladeXML* xml;
  GtkWidget* entry1;

  xml = glade_get_widget_tree (GTK_WIDGET (button1));
  entry1 = glade_xml_get_widget (xml, "entry1");

  ...
}



3.5 How do I get the value of a GtkOptionMenu?

Call gtk_menu_get_active() with the GtkOptionMenu's menu to get the currently
selected menu item. You can use g_list_index() to find its index in the menu:

void
on_button1_clicked                     (GtkButton       *button,
                                        gpointer         user_data)
{
  GtkWidget *option_menu, *menu, *active_item;
  gint active_index;

  option_menu = lookup_widget (GTK_WIDGET (button), "optionmenu1");
  menu = GTK_OPTION_MENU (option_menu)->menu;
  active_item = gtk_menu_get_active (GTK_MENU (menu));
  active_index = g_list_index (GTK_MENU_SHELL (menu)->children, active_item);

  g_print ("Active index: %i\n", active_index);
}



3.6 How do I get a GtkOptionMenu to call a function when it changes?

Glade doesn't support this at present, but you can set it up manually.

When you create the window, get the option menu and connect to the "deactivate"
signal emitted by its menu:

  window1 = create_window1 ();
  option_menu = lookup_widget (window1, "optionmenu1");
  gtk_signal_connect (GTK_OBJECT (GTK_OPTION_MENU (option_menu)->menu),
                      "deactivate", GTK_SIGNAL_FUNC (on_option_selected),
                      NULL);


Then add a handler to callbacks.c. You can get the index of the selected item
just like the previous answer:

static void
on_option_selected (GtkMenuShell *menu_shell,
                    gpointer data)
{
  GtkWidget *active_item;
  gint item_index;
  
  active_item = gtk_menu_get_active (GTK_MENU (menu_shell));
  item_index = g_list_index (menu_shell->children, active_item);

  g_print ("In on_option_selected active: %i\n", item_index);
}



3.7 How do I connect to GtkAdjustment signals?

Glade doesn't support this at present, but you can set it up manually, in a
similar way to question 3.6.

When you create the window, get a pointer to the widget containing the
adjustment, and connect to the "changed" or "value_changed" signals:

  window1 = create_window1 ();
  hscale = lookup_widget (window1, "hscale1");
  gtk_signal_connect (GTK_OBJECT (GTK_RANGE (hscale)->adjustment),
                      "changed", GTK_SIGNAL_FUNC (on_adjustment_changed),
                      NULL);
